name: Deploy

on:
  push:
    branches: [main]

jobs:
  deploy:
    runs-on: self-hosted

    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Update code on server
        run: |
          sshpass -p "${{ secrets.SSH_PRIVATE_KEY }}" ssh ${{ secrets.USERNAME }}@${{ secrets.HOST }} -p ${{ secrets.PORT }} "cd /var/www/food_delivery_backend && git pull"
